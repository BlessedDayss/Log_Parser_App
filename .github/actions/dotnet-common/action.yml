name: dotnet-common

description: "Shared .NET SDK, tools install, and NuGet caching"

runs:
  using: "composite"
  steps:
    - name: Setup .NET SDK
      uses: actions/setup-dotnet@v4
      with:
        dotnet-version: ${{ env.DOTNET_VERSION }}

    - name: Cache NuGet packages
      uses: actions/cache@v4
      with:
        path: |
          ~/.nuget/packages
          ~/.dotnet/tools/.store
        key: nuget-${{ runner.os }}-${{ hashFiles('**/*.csproj') }}

    - name: Install global tools
      shell: pwsh
      run: |
        dotnet tool install --global dotnet-sonarscanner
        dotnet tool install --global gitversion.tool